# Linglong Installer Configuration

product:
  name: "简易玲珑商店安装包"
  logo: "assets/logo.png"
  theme:
    primaryColor: "#2196F3"

meta:
  version: "1.0.0"
  vendor: "Linyaps Simple Store SIG"
  min_disk_mb: 100

flows:
  install:
    entry: welcome
    steps:
      - id: welcome
        title: "欢迎"
        screen:
          type: welcome
          content: |
            此向导将引导您完成简易玲珑商店的安装。

            本安装包主要用于 UOS 1070、麒麟系统等国产 Linux 发行版。

            国际主流 Linux 发行版更建议使用 DEB 或 RPM 包进行安装，
            可前往官网获取对应版本安装包。

            下载 DEB 或 RPM 请见
            https://gitee.com/Shirosu/linglong-store/releases/latest

      - id: detect
        title: "检查系统环境"
        screen:
          type: go:richtext
          content: |
            已识别发行版：${distro.name}
            ID/版本：${distro.id} ${distro.version}

            请确认无误后点击“继续”进行下一步。
        guards:
          - type: go:expression
            expression: distro.supported
            expected: true
            message: "当前发行版不在支持列表，无法继续。"

      - id: confirm
        title: "确认安装"
        screen:
          type: go:richtext
          content: |
            已识别发行版：${distro.name}
            ID/版本：${distro.id} ${distro.version}

            接下来将进行：
            ${distro.next_steps}

            软件源名称：${distro.repo_name}
            软件源地址：${distro.repo_url}

            将执行的命令：
            ${distro.commands}

            请确认以上信息无误后点击“继续”开始安装。
        guards:
          - type: go:expression
            expression: distro.supported
            expected: true
            message: "当前发行版不在支持列表，无法继续。"

      - id: install
        title: "正在安装"
        screen:
          type: go:progress
          title: "正在安装"
          description: "正在安装玲珑环境..."
        tasks:
          - type: shell
            command: "bash"
            args: ["${distro.script}"]

      - id: finish
        title: "完成"
        screen:
          type: finish
